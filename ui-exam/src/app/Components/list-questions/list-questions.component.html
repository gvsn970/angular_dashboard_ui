<block-ui>

</block-ui>

<div class="ques_tabs p-4">
    <div class="col-sm-12 text-right">
        <span class="pr-4">{{tenantName | titlecase}} Questions</span>
        <mat-slide-toggle class="example-margin" [color]="color" [checked]="checked" (change)="onLinkClick($event)">
        </mat-slide-toggle>
        <span class="pl-4">Global Questions</span>
        <hr>
    </div>
    <div *ngIf="!isGlobal">
        <button class="btn btn-primary mr-4" data-toggle="modal
                " data-target="#exampleModalCenter" id="edit_ques">
            <i class="material-icons">
                add
            </i>
            Add Questions</button>
        <!-- <div class="row m-0 add_ques_Sec pt-4 ">
                    <div class="col-sm-6">
                        <input class="form-control search_ques" [(ngModel)]="globalSearchKey" placeholder="Search By Category" (input)="pickGlobalQUestions(globalSearchKey)">
                    </div>
                    <div class="col-sm-6 text-right">
                        <button class="btn btn-primary" data-toggle="modal" data-target="#globQuesModal" *ngIf="importQuesArr.length">Import</button>
                    </div>
                </div> -->

        <div class="row m-0 add_ques_Sec pt-4 ">
            <div class="col-sm-8">
                <!-- <h4>Categories</h4> -->
                <h4 *ngFor="let catPath of categoryPath;let i = index" class="cat_h4">
                    <span class="catpath_arrow" *ngIf="i!=0">
                        <i class="material-icons">
                            chevron_right
                        </i>
                    </span>
                    <span *ngIf="catPath && catPath.testCategoryName" (click)="gotoPath(catPath,i)" class="pointer">{{catPath.testCategoryName}}</span>
                    <span *ngIf="catPath && catPath.name" (click)="gotoPath(catPath,i)" class="pointer">{{catPath.name}}</span>

                </h4>
            </div>
            <div class="col-sm-4">

                <button class="btn btn-primary mr-4" id="add_ques_modal" data-toggle="modal" data-target="#exampleModalCenter">
                    <i class="material-icons">
                        add
                    </i>
                    Add Questions</button>

                <button class="btn btn-primary" data-toggle="modal" data-target="#bulkUploadModal" (click)="getTemplateLink()">
                    <i class="material-icons">
                        vertical_align_top
                    </i>
                    Bulk Upload</button>



                <!-- <form>
                            <div class="input-group global_search">
                                <input class="form-control search_ques" [(ngModel)]="globalSearchKey" placeholder="Search By Category" (input)="pickGlobalQUestions(globalSearchKey)"
                                    [ngModelOptions]="{standalone: true}">
                                <span class="input-group-addon">
                                    <i class="material-icons">
                                        search
                                    </i>
                                </span>
                            </div>
                        </form> -->
            </div>

            <div class="col-sm-12 mt-4 mb-4">
                <div class="alphabets_cat">
                    <span *ngFor="let alpha of alphaArr" [ngClass]="{'alpha_letters':true,'alpha_all':alpha=='All'}" (click)="getByAlpha(alpha)">
                        <h5>{{alpha}}</h5>
                    </span>
                </div>
            </div>

            <div class="col-sm-12 mt-4 mb-4 categ_ques_tbl" *ngIf="!isQues">
                <table class="table">
                    <thead>
                        <tr *ngIf="allCategory && allCategory['listOfTestCategory']">
                            <th>Category Title</th>
                            <th>Created On</th>
                            <!-- <th>Owner</th> -->
                        </tr>
                        <tr *ngIf="(allCategory && allCategory['listOfTestSubCategory'])">
                            <!-- <th></th> -->
                            <th>Title</th>
                            <th>Type</th>
                            <th>Hierarchy</th>
                        </tr>
                    </thead>
                    <tbody *ngIf="allCategory && allCategory['listOfTestCategory'] && allCategory['listOfTestCategory'].length">
                        <tr *ngFor="let cat of allCategory['listOfTestCategory'] | paginate: { itemsPerPage: 10, currentPage: p_two,id: cat_page_id};let i=index" (click)="getSubCategories(cat)">
                            <td>{{cat.testCategoryName}}</td>
                            <td>
                                <span *ngIf="cat.createdOn != 'null'">{{cat.createdOn | date:'medium'}}</span>
                                <span *ngIf="!cat.createdOn">-</span>
                                <span *ngIf="cat.createdOn == 'null'">-</span>
                            </td>
                            <!-- <td>{{cat.testCategoryOwner}}</td> -->
                        </tr>
                    </tbody>
                    <tbody *ngIf="(allCategory && allCategory['listOfTestCategory'] && !allCategory['listOfTestCategory'].length)">
                        <tr>
                            <td colspan="3" class="errorTxt text-center">{{allCategory.statusMessage}}</td>
                        </tr>
                    </tbody>
                    <tbody *ngIf="allCategory && allCategory['listOfTestSubCategory'] && allCategory['listOfTestSubCategory'].length">
                        <tr *ngFor="let cat of allCategory['listOfTestSubCategory'] | paginate: { itemsPerPage: 10, currentPage: p_three,id:subcat_page_id};let i=index" (click)="getSubCategoriesBy(cat)" [ngClass]="{'sec_tr':cat.type == '3'}">
                            <!-- <td>
                                        <span class="sub_cat_icon" *ngIf="cat.type=='2'">
                                            <i class="material-icons">
                                                folder
                                            </i>
                                        </span>
                                        <span class="sec_icon" *ngIf="cat.type=='3'">
                                            <i class="material-icons">
                                                folder
                                            </i>
                                        </span>
                                    </td> -->
                            <td>
                                <span class="sub_cat_icon" *ngIf="cat.type=='2'">
                                    <i class="material-icons">
                                        folder
                                    </i>
                                </span>
                                <span class="sec_icon" *ngIf="cat.type=='3'">
                                    <i class="material-icons">
                                        folder
                                    </i>
                                </span> {{cat.name}}
                            </td>
                            <td>
                                <span *ngIf="cat.type == '2'">Sub-Category</span>
                                <span *ngIf="cat.type == '3'"> Section</span>
                                <span *ngIf="cat.type == '3'" class="badge badge-success ml-3" [popoverOnHover]="true" [popover]="questionCount">{{cat.questionsCount}}</span>

                                <popover-content #questionCount title="" placement="right" [animation]="true" style="box-shadow: 10px 10px 5px #aaaaaa;">
                                    <span *ngIf="cat.type == '3'" style="color: #646363;">Total Questions - {{cat.questionsCount}}</span>

                                </popover-content>
                            </td>
                            <td>{{cat.heirarchy}}</td>
                        </tr>
                    </tbody>
                    <tbody *ngIf="(allCategory && allCategory['listOfTestSubCategory'] && !allCategory['listOfTestSubCategory'].length)">
                        <tr>
                            <td colspan="3" class="errorTxt text-center">Categories Not Found</td>
                        </tr>
                    </tbody>
                    <!-- <tbody *ngIf="allCategory && allCategory['listOfAllSections'] && allCategory['listOfAllSections'].length">
                                <tr *ngFor="let sec of allCategory['listOfAllSections']" (click)="getSubCategoriesBy(cat)">
                                    <td>
                                        <span class="sec_icon">
                                            <i class="material-icons">
                                                folder
                                            </i>
                                        </span>
                                    </td>
                                    <td>{{sec.testSectionName}}</td>
                                    <td>{{sec.sectionHeirarchy}}</td>
                                </tr>
                            </tbody> -->
                </table>

                <div class="ques_sec_div col-sm-12 text-center" *ngIf="allCategory && allCategory['listOfTestCategory'] && allCategory['listOfTestCategory'].length">
                    <pagination-controls (pageChange)="p_two = $event" previousLabel="<" nextLabel=">" [id]="cat_page_id"></pagination-controls>
                </div>
                <div class="ques_sec_div col-sm-12 text-center" *ngIf="allCategory && allCategory['listOfTestSubCategory'] && allCategory['listOfTestSubCategory'].length">
                    <pagination-controls (pageChange)="p_three = $event" previousLabel="<" nextLabel=">" [id]="subcat_page_id"></pagination-controls>
                </div>

            </div>

        </div>

        <div class="row mr-3 ml-3 mt-4 mb-4" *ngIf="isQues">
            <div class="col-sm-12">
                <h5 class="text-center ques_sec_name">
                    <!-- <span *ngIf="catPath && catPath.testCategoryName" (click)="gotoPath(catPath,i)" class="pointer">{{catPath.testCategoryName}}</span> -->
                    <span *ngIf="categoryPath.length">{{categoryPath[categoryPath.length-1].name}}</span>

                </h5>
                <hr class="ques_sec_hr" *ngIf="categoryPath.length">
            </div>
            <!-- <div class="col-sm-2 text-right p-0">
                        <button class="btn btn-primary import_ques_btn" data-toggle="modal" data-target="#globQuesModal" [disabled]="!importQuesArr.length">Import</button>
                    </div> -->
        </div>

        <div class="row boxShadow table_div mr-3 ml-3 mt-4 mb-4" *ngIf="isQues">

            <!-- <table class="table">
                        <thead>
                            <tr class="tbl_hdng">
                                <th class="border-0">S.No</th>
                                <th class="border-0">Questions</th>
                                <th class="border-0">Category</th>
                                <th class="border-0">Select</th>
                            </tr>
                        </thead>
                        <tbody *ngIf="globalQues && globalQues['listOfQuestions'].length">
                            <tr *ngFor="let ques of globalQues['listOfQuestions'];let i=index" class="pointer glob_ques" id="glob_ques_id{{i}}" (mouseover)="setPos(i,ques)">
                                <td class="">
                                    <span>{{i+1}}</span>
                                </td>
    
    
                                <td *ngIf="ques.questionTitle.length < 84" title="{{ques.questionTitle}}">{{ques.questionTitle}}</td>
                                <td *ngIf="ques.questionTitle.length >= 84" title="{{ques.questionTitle}}">{{ques.questionTitle | slice:0:84}} ...</td>
                                <td *ngIf="ques.hierarchy?.length < 12 && ques.hierarchy!='null'" title="{{ques.hierarchy}}" class="">{{ques.hierarchy}}</td>
                                <td *ngIf="ques.hierarchy?.length < 12 && ques.hierarchy=='null'" title="{{ques.hierarchy}}" class="">-</td>
                                <td *ngIf="ques.hierarchy?.length >= 12" title="{{ques.hierarchy}}" class="">{{ques.hierarchy | slice:0:12}} ...</td>
    
                                <td>
                                    <mat-checkbox [color]="color" class="example-margin" [(ngModel)]="impQues[i]" (click)="importQues(ques,impQues[i])"></mat-checkbox>
                                </td>
                                <div id="menu_content">
                                    <table class="table" *ngIf="hoverGlobQues">
                                        <tr>
                                            <th>Question</th>
                                            <th>Category</th>
                                            <th>Options</th>
                                            <th>Answer</th>
                                        </tr>
                                        <tr>
                                            <td class="maxWidth240">{{ hoverGlobQues.questionTitle}}</td>
                                            <td class="maxWidth320">{{hoverGlobQues.hierarchy}}</td>
                                            <td>
                                                <p *ngFor="let opt of hoverGlobQues?.optionsList">{{opt.optionText}}</p>
                                            </td>
                                            <td>
                                                <div *ngFor="let opt of hoverGlobQues?.optionsList">
                                                    <p *ngIf="opt.answer"> {{opt.optionText}}</p>
                                                </div>
                                            </td>
                                            <td>
                                                <button class="btn btn-link" (click)="editQuestion(hoverGlobQues)">Edit</button>
                                            </td>
    
                                        </tr>
                                    </table>
                                </div>
                            </tr>
                        </tbody>
                        <tbody *ngIf="!globalQues ||( globalQues && !globalQues['listOfQuestions'].length)">
                            <tr class="errorTxt text-center">
                                <td colspan="4">Questions Not Found</td>
                            </tr>
                        </tbody>
                    </table> -->

            <table class="table sec_ques text-center">
                <thead>
                    <tr class="tbl_hdng">
                        <th class="border-0">S.No</th>
                        <th class="border-0">Question Title</th>
                        <th class="border-0">Type</th>
                        <th class="border-0">Complexity</th>
                        <!-- <th class="border-0 sel_all_che">
                                    <mat-checkbox [color]="color" class="example-margin" [(ngModel)]="impAllQues" (click)="importAllQues(impAllQues)" [checked]="checkAllImported()">Select All</mat-checkbox>
                                </th> -->

                    </tr>
                </thead>

                <tbody *ngIf="globalQues && globalQues['questionsList'].length">
                    <tr *ngFor="let ques of globalQues['questionsList']  | paginate: { itemsPerPage: 10,currentPage: p_one,id: sec_ques_local};let i=index" class="pointer glob_ques" id="glob_ques_id{{i}}" data-toggle="modal" data-target="#quesViewModal" (click)="viewQuestion(ques)">
                        <td>
                            <span class="ques_cunt_circle" *ngIf="p_one==1">{{i+1}}</span>
                            <span class="ques_cunt_circle" *ngIf="p_one>1">{{(p_one-1)*10+i+1}}</span>
                        </td>



                        <td *ngIf="ques.qustionText.length < 50" title="{{ques.qustionText}}">{{ques.qustionText}}</td>
                        <td *ngIf="ques.qustionText.length >= 50" title="{{ques.qustionText}}">{{ques.qustionText | slice:0:50}} ...</td>

                        <td title="{{ques.questionType}}">{{ques.questionType}}</td>
                        <td title="{{ques.questionComplexityType}}">{{ques.questionComplexityType}}</td>
                        <!-- <td class="">
                                    <mat-checkbox [color]="color" class="example-margin" (change)="importQues(ques,impQues[i],$event)" (click)="stopProp($event)"
                                        [checked]="checkImport(ques)"></mat-checkbox>
    
                                </td> -->
                        <!-- <div id="menu_content">
                                    <table class="table" *ngIf="hoverGlobQues">
                                        <tr>
                                            <th>Question</th>
                                            <th>Category</th>
                                            <th>Options</th>
                                            <th>Answer</th>
                                        </tr>
                                        <tr>
                                            <td class="maxWidth240">{{ hoverGlobQues.questionTitle}}</td>
                                            <td class="maxWidth320">{{hoverGlobQues.hierarchy}}</td>
                                            <td>
                                                <p *ngFor="let opt of hoverGlobQues?.optionsList">{{opt.optionText}}</p>
                                            </td>
                                            <td>
                                                <div *ngFor="let opt of hoverGlobQues?.optionsList">
                                                    <p *ngIf="opt.answer"> {{opt.optionText}}</p>
                                                </div>
                                            </td>
                                            <td>
                                                <button class="btn btn-link" (click)="editQuestion(hoverGlobQues)">Edit</button>
                                            </td>
    
                                        </tr>
                                    </table>
                                </div> -->
                    </tr>
                </tbody>
                <tbody *ngIf="!globalQues ||( globalQues && !globalQues['questionsList'].length)">
                    <tr class="errorTxt text-center">
                        <td colspan="4">Questions Not Found</td>
                    </tr>
                </tbody>

            </table>

            <div class="ques_sec_div col-sm-12 text-center" *ngIf="globalQues && globalQues['questionsList'] && globalQues['questionsList'].length">
                <pagination-controls (pageChange)="p_one = $event" previousLabel="<" nextLabel=">" [id]="sec_ques_local"></pagination-controls>
            </div>

            <!-- <div class="col-sm-12 p-4 text-center" *ngIf="globalQues && globalQues['questionsList'].length">
                        <button class="btn btn-primary mr-4" (click)="getPrevGlob()" [disabled]="offset<0">Previous</button>
                        <button class="btn btn-primary ml-4" (click)="getNextGlob()">Next</button>
                    </div> -->

        </div>
    </div>
    <div *ngIf="isGlobal">
        <button class="btn btn-primary mr-4" data-toggle="modal
                " data-target="#exampleModalCenter" id="edit_ques">
            <i class="material-icons">
                add
            </i>
            Add Questions</button>
        <!-- <div class="row m-0 add_ques_Sec pt-4 ">
                    <div class="col-sm-6">
                        <input class="form-control search_ques" [(ngModel)]="globalSearchKey" placeholder="Search By Category" (input)="pickGlobalQUestions(globalSearchKey)">
                    </div>
                    <div class="col-sm-6 text-right">
                        <button class="btn btn-primary" data-toggle="modal" data-target="#globQuesModal" *ngIf="importQuesArr.length">Import</button>
                    </div>
                </div> -->

        <div class="row m-0 add_ques_Sec pt-4 ">
            <div class="col-sm-12">
                <!-- <h4>Categories</h4> -->
                <h4 *ngFor="let catPath of categoryGlobalPath;let i = index" class="cat_h4">
                    <span class="catpath_arrow" *ngIf="i!=0">
                        <i class="material-icons">
                            chevron_right
                        </i>
                    </span>
                    <span *ngIf="catPath && catPath.categoryName" (click)="gotoPathGlobal(catPath,i)" class="pointer">{{catPath.categoryName}}</span>
                    <span *ngIf="catPath && catPath.type == '2'" (click)="gotoPathGlobal(catPath,i)" class="pointer">{{catPath.subCategoryName}}</span>
                    <span *ngIf="catPath && catPath.type == '3'" (click)="gotoPathGlobal(catPath,i)" class="pointer">{{catPath.sectionName}}</span>

                </h4>
            </div>
            <!-- <div class="col-sm-4">

                    <button class="btn btn-primary mr-4" id="add_ques_modal" data-toggle="modal" data-target="#exampleModalCenter">
                        <i class="material-icons">
                            add
                        </i>
                        Add Questions</button>

                    <button class="btn btn-primary" data-toggle="modal" data-target="#bulkUploadModal" (click)="getTemplateLink()">
                        <i class="material-icons">
                            vertical_align_top
                        </i>
                        Bulk Upload</button>


                </div> -->

            <div class="col-sm-12 mt-4 mb-4">
                <div class="alphabets_cat">
                    <span *ngFor="let alpha of alphaArr" [ngClass]="{'alpha_letters':true,'alpha_all':alpha=='All'}" (click)="getByAlphaGlob(alpha)">
                        <h5>{{alpha}}</h5>
                    </span>
                </div>
            </div>

            <div class="col-sm-12 mt-4 mb-4 categ_ques_tbl" *ngIf="!isGlobQues">
                <table class="table">
                    <thead>
                        <tr *ngIf="allGlobalCategory && allGlobalCategory['globalCategoriesList']">
                            <th>Category Title</th>
                            <th>Created On</th>
                            <!-- <th>Hierarchy</th> -->
                        </tr>
                        <tr *ngIf="(allGlobalCategory && allGlobalCategory['listOfGlobalSubCategory'])">
                            <!-- <th></th> -->
                            <th>Title</th>
                            <th>Type</th>
                            <th>Hierarchy</th>
                        </tr>
                    </thead>
                    <tbody *ngIf="allGlobalCategory && allGlobalCategory['globalCategoriesList'] && allGlobalCategory['globalCategoriesList'].length">
                        <tr *ngFor="let cat of allGlobalCategory['globalCategoriesList'] | paginate: { itemsPerPage: 10, currentPage: p_glob_1,id: glob_page_1};let i=index" (click)="getGlobalSubCategories(cat)">
                            <td>{{cat.categoryName}}</td>
                            <td>
                                <span *ngIf="cat.creadtedOn != 'null'">{{cat.creadtedOn | date:'medium'}}</span>
                                <span *ngIf="!cat.creadtedOn">-</span>
                                <span *ngIf="cat.creadtedOn == 'null'">-</span>
                            </td>
                            <!-- <td>{{cat.hierarchy}}</td> -->
                        </tr>
                    </tbody>
                    <tbody *ngIf="(allGlobalCategory && allGlobalCategory['globalCategoriesList'] && !allGlobalCategory['globalCategoriesList'].length)">
                        <tr>
                            <td colspan="3" class="errorTxt text-center">{{allGlobalCategory.statusMessage}}</td>
                        </tr>
                    </tbody>
                    <tbody *ngIf="allGlobalCategory && allGlobalCategory['listOfGlobalSubCategory'] && allGlobalCategory['listOfGlobalSubCategory'].length">
                        <tr *ngFor="let cat of allGlobalCategory['listOfGlobalSubCategory'] | paginate: { itemsPerPage: 10, currentPage: p_glob_2,id:glob_page_2};let i=index" (click)="getGlobalSubCategoriesBy(cat)" [ngClass]="{'sec_tr':cat.type == '3'}">
                            <!-- <td>
                                        <span class="sub_cat_icon" *ngIf="cat.type=='2'">
                                            <i class="material-icons">
                                                folder
                                            </i>
                                        </span>
                                        <span class="sec_icon" *ngIf="cat.type=='3'">
                                            <i class="material-icons">
                                                folder
                                            </i>
                                        </span>
                                    </td> -->
                            <td>
                                <span class="sub_cat_icon" *ngIf="cat.type=='2'">
                                    <i class="material-icons">
                                        folder
                                    </i>
                                </span>
                                <span class="sec_icon" *ngIf="cat.type=='3'">
                                    <i class="material-icons">
                                        folder
                                    </i>
                                </span>
                                <span *ngIf="cat.type=='2'">
                                    {{cat.subCategoryName}}
                                </span>
                                <span *ngIf="cat.type=='3'">
                                    {{cat.sectionName}}
                                </span>

                            </td>
                            <td>
                                <span *ngIf="cat.type == '2'">Sub-Category</span>
                                <span *ngIf="cat.type == '3'">Section</span>
                                <span *ngIf="cat.type == '3'" class="badge badge-success ml-3" [popoverOnHover]="true" [popover]="questionCount1">{{cat.questionCount}}</span>
                                <popover-content #questionCount1 title="" placement="right" [animation]="true" style="box-shadow: 10px 10px 5px #aaaaaa;">
                                    <span *ngIf="cat.type == '3'" style="color: #646363;">Total Questions - {{cat.questionCount}}</span>

                                </popover-content>
                            </td>
                            <td>{{cat.hierarchy}}</td>
                        </tr>
                    </tbody>
                    <tbody *ngIf="(allGlobalCategory && allGlobalCategory['listOfGlobalSubCategory'] && !allGlobalCategory['listOfGlobalSubCategory'].length)">
                        <tr>
                            <td colspan="3" class="errorTxt text-center">Categories Not Found</td>
                        </tr>
                    </tbody>
                    <!-- <tbody *ngIf="allCategory && allCategory['listOfAllSections'] && allCategory['listOfAllSections'].length">
                                <tr *ngFor="let sec of allCategory['listOfAllSections']" (click)="getSubCategoriesBy(cat)">
                                    <td>
                                        <span class="sec_icon">
                                            <i class="material-icons">
                                                folder
                                            </i>
                                        </span>
                                    </td>
                                    <td>{{sec.testSectionName}}</td>
                                    <td>{{sec.sectionHeirarchy}}</td>
                                </tr>
                            </tbody> -->
                </table>

                <div class="ques_sec_div col-sm-12 text-center" *ngIf="allGlobalCategory && allGlobalCategory['globalCategoriesList'] && allGlobalCategory['globalCategoriesList'].length">
                    <pagination-controls (pageChange)="p_glob_1 = $event" previousLabel="<" nextLabel=">" [id]="glob_page_1"></pagination-controls>
                </div>
                <div class="ques_sec_div col-sm-12 text-center" *ngIf="allGlobalCategory && allGlobalCategory['listOfGlobalSubCategory'] && allGlobalCategory['listOfGlobalSubCategory'].length">
                    <pagination-controls (pageChange)="p_glob_2 = $event" previousLabel="<" nextLabel=">" [id]="glob_page_2"></pagination-controls>
                </div>

            </div>

        </div>

        <div class="row mr-3 ml-3 mt-4 mb-4" *ngIf="isGlobQues">
            <div class="col-sm-10">
                <h5 class="text-center ques_sec_name">
                    <!-- <span *ngIf="catPath && catPath.testCategoryName" (click)="gotoPath(catPath,i)" class="pointer">{{catPath.testCategoryName}}</span> -->
                    <span *ngIf="categoryGlobalPath.length">{{categoryGlobalPath[categoryGlobalPath.length-1].sectionName}}</span>

                </h5>
                <hr class="ques_sec_hr" *ngIf="categoryGlobalPath.length">
            </div>
            <div class="col-sm-2 text-right p-0">
                <button class="btn btn-primary import_ques_btn" (click)="impQuestoSec()" data-toggle="modal" data-target="#globQuesModal" [disabled]="!importQuesArr.length">Import</button>
            </div>
        </div>

        <div class="row boxShadow table_div mr-3 ml-3 mt-4 mb-4" *ngIf="isGlobQues">

            <!-- <table class="table">
                        <thead>
                            <tr class="tbl_hdng">
                                <th class="border-0">S.No</th>
                                <th class="border-0">Questions</th>
                                <th class="border-0">Category</th>
                                <th class="border-0">Select</th>
                            </tr>
                        </thead>
                        <tbody *ngIf="globalQues && globalQues['listOfQuestions'].length">
                            <tr *ngFor="let ques of globalQues['listOfQuestions'];let i=index" class="pointer glob_ques" id="glob_ques_id{{i}}" (mouseover)="setPos(i,ques)">
                                <td class="">
                                    <span>{{i+1}}</span>
                                </td>
    
    
                                <td *ngIf="ques.questionTitle.length < 84" title="{{ques.questionTitle}}">{{ques.questionTitle}}</td>
                                <td *ngIf="ques.questionTitle.length >= 84" title="{{ques.questionTitle}}">{{ques.questionTitle | slice:0:84}} ...</td>
                                <td *ngIf="ques.hierarchy?.length < 12 && ques.hierarchy!='null'" title="{{ques.hierarchy}}" class="">{{ques.hierarchy}}</td>
                                <td *ngIf="ques.hierarchy?.length < 12 && ques.hierarchy=='null'" title="{{ques.hierarchy}}" class="">-</td>
                                <td *ngIf="ques.hierarchy?.length >= 12" title="{{ques.hierarchy}}" class="">{{ques.hierarchy | slice:0:12}} ...</td>
    
                                <td>
                                    <mat-checkbox [color]="color" class="example-margin" [(ngModel)]="impQues[i]" (click)="importQues(ques,impQues[i])"></mat-checkbox>
                                </td>
                                <div id="menu_content">
                                    <table class="table" *ngIf="hoverGlobQues">
                                        <tr>
                                            <th>Question</th>
                                            <th>Category</th>
                                            <th>Options</th>
                                            <th>Answer</th>
                                        </tr>
                                        <tr>
                                            <td class="maxWidth240">{{ hoverGlobQues.questionTitle}}</td>
                                            <td class="maxWidth320">{{hoverGlobQues.hierarchy}}</td>
                                            <td>
                                                <p *ngFor="let opt of hoverGlobQues?.optionsList">{{opt.optionText}}</p>
                                            </td>
                                            <td>
                                                <div *ngFor="let opt of hoverGlobQues?.optionsList">
                                                    <p *ngIf="opt.answer"> {{opt.optionText}}</p>
                                                </div>
                                            </td>
                                            <td>
                                                <button class="btn btn-link" (click)="editQuestion(hoverGlobQues)">Edit</button>
                                            </td>
    
                                        </tr>
                                    </table>
                                </div>
                            </tr>
                        </tbody>
                        <tbody *ngIf="!globalQues ||( globalQues && !globalQues['listOfQuestions'].length)">
                            <tr class="errorTxt text-center">
                                <td colspan="4">Questions Not Found</td>
                            </tr>
                        </tbody>
                    </table> -->

            <table class="table sec_ques text-center">
                <thead>
                    <tr class="tbl_hdng">
                        <th class="border-0">S.No</th>
                        <th class="border-0">Question Title</th>
                        <th class="border-0">Type</th>
                        <th class="border-0">Complexity</th>
                        <th class="border-0 sel_all_che">
                            <mat-checkbox [color]="color" class="example-margin" [(ngModel)]="impAllQues" (click)="importAllQues(impAllQues)">Select All</mat-checkbox>
                        </th>

                    </tr>
                </thead>
                <!-- <tbody *ngIf="globalQues && globalQues['listOfQuestions'].length">
                            <tr *ngFor="let ques of globalQues['listOfQuestions'];let i=index" class="pointer glob_ques" id="glob_ques_id{{i}}" (mouseover)="setPos(i,ques)">
                                <td class="">
                                        <mat-checkbox [color]="color" class="example-margin" [(ngModel)]="impQues[i]" (click)="importQues(ques,impQues[i])"></mat-checkbox> 
                                        <span class="ques_cunt_circle">{{i+1}}</span>
                                </td>
    
    
                                <td *ngIf="ques.questionTitle.length < 84" title="{{ques.questionTitle}}">{{ques.questionTitle}}</td>
                                <td *ngIf="ques.questionTitle.length >= 84" title="{{ques.questionTitle}}">{{ques.questionTitle | slice:0:84}} ...</td>
                               
                                <td title="{{ques.questionTitle}}">{{ques.questionTypeName}}</td>
                                <td title="{{ques.questionTitle}}">{{ques.questionComplexity}}</td>
    
                                <div id="menu_content">
                                    <table class="table" *ngIf="hoverGlobQues">
                                        <tr>
                                            <th>Question</th>
                                            <th>Category</th>
                                            <th>Options</th>
                                            <th>Answer</th>
                                        </tr>
                                        <tr>
                                            <td class="maxWidth240">{{ hoverGlobQues.questionTitle}}</td>
                                            <td class="maxWidth320">{{hoverGlobQues.hierarchy}}</td>
                                            <td>
                                                <p *ngFor="let opt of hoverGlobQues?.optionsList">{{opt.optionText}}</p>
                                            </td>
                                            <td>
                                                <div *ngFor="let opt of hoverGlobQues?.optionsList">
                                                    <p *ngIf="opt.answer"> {{opt.optionText}}</p>
                                                </div>
                                            </td>
                                            <td>
                                                <button class="btn btn-link" (click)="editQuestion(hoverGlobQues)">Edit</button>
                                            </td>
    
                                        </tr>
                                    </table>
                                </div>
                            </tr>
                        </tbody>
                        <tbody *ngIf="!globalQues ||( globalQues && !globalQues['listOfQuestions'].length)">
                            <tr class="errorTxt text-center">
                                <td colspan="4">Questions Not Found</td>
                            </tr>
                        </tbody> -->

                <tbody *ngIf="newGlobQues && newGlobQues['questionsList'].length">
                    <tr *ngFor="let ques of newGlobQues['questionsList']  | paginate: { itemsPerPage: 10, currentPage: p_glob_3,id: sub_glob_ques};let i=index" class="pointer glob_ques" id="glob_ques_id{{i}}" data-toggle="modal" data-target="#quesViewModal" (click)="viewQuestion(ques)">
                        <td>
                            <span class="ques_cunt_circle" *ngIf="p_glob_3==1">{{i+1}}</span>
                            <span class="ques_cunt_circle" *ngIf="p_glob_3>1">{{(p_glob_3-1)*10+i+1}}</span>
                        </td>



                        <td *ngIf="ques.qustionText.length < 50" title="{{ques.qustionText}}">{{ques.qustionText}}</td>
                        <td *ngIf="ques.qustionText.length >= 50" title="{{ques.qustionText}}">{{ques.qustionText | slice:0:50}} ...</td>

                        <td title="{{ques.questionType}}">{{ques.questionType}}</td>
                        <td title="{{ques.questionComplexityType}}">{{ques.questionComplexityType}}</td>
                        <td class="">
                            <mat-checkbox [color]="color" class="example-margin" (change)="importQues(ques,impQues[i],$event,i)" (click)="stopProp($event)" [checked]="checkImport(ques)"></mat-checkbox>

                        </td>
                        <!-- <div id="menu_content">
                                    <table class="table" *ngIf="hoverGlobQues">
                                        <tr>
                                            <th>Question</th>
                                            <th>Category</th>
                                            <th>Options</th>
                                            <th>Answer</th>
                                        </tr>
                                        <tr>
                                            <td class="maxWidth240">{{ hoverGlobQues.questionTitle}}</td>
                                            <td class="maxWidth320">{{hoverGlobQues.hierarchy}}</td>
                                            <td>
                                                <p *ngFor="let opt of hoverGlobQues?.optionsList">{{opt.optionText}}</p>
                                            </td>
                                            <td>
                                                <div *ngFor="let opt of hoverGlobQues?.optionsList">
                                                    <p *ngIf="opt.answer"> {{opt.optionText}}</p>
                                                </div>
                                            </td>
                                            <td>
                                                <button class="btn btn-link" (click)="editQuestion(hoverGlobQues)">Edit</button>
                                            </td>
    
                                        </tr>
                                    </table>
                                </div> -->
                    </tr>
                </tbody>
                <tbody *ngIf="!newGlobQues ||( newGlobQues && !newGlobQues['questionsList'].length)">
                    <tr class="errorTxt text-center">
                        <td colspan="4">Questions Not Found</td>
                    </tr>
                </tbody>

            </table>

            <div class="ques_sec_div col-sm-12 text-center" *ngIf="newGlobQues && newGlobQues['questionsList'] && newGlobQues['questionsList'].length">
                <pagination-controls (pageChange)="p_glob_3 = $event" previousLabel="<" nextLabel=">" [id]="sub_glob_ques"></pagination-controls>
            </div>

            <!-- <div class="col-sm-12 p-4 text-center" *ngIf="globalQues && globalQues['questionsList'].length">
                        <button class="btn btn-primary mr-4" (click)="getPrevGlob()" [disabled]="offset<0">Previous</button>
                        <button class="btn btn-primary ml-4" (click)="getNextGlob()">Next</button>
                    </div> -->

        </div>
    </div>
</div>

<!-- 
<div class="ques_tabs p-4">
    <mat-tab-group (selectedTabChange)="onLinkClick($event)">
        <mat-tab label="Tenant Questions Catalogue">

        </mat-tab>
        <mat-tab label="Global Questions Catalogue">


        </mat-tab>
    </mat-tab-group>
</div> -->


<!-- The Modal -->
<div class="modal" id="bulkUploadModal">
    <div class="modal-dialog">
        <div class="modal-content">

            <!-- Modal Header -->
            <div class="modal-header">
                <h4 class="modal-title"> Bulk Upload</h4>
                <button id="close_bul_btn" type="button" class="close" data-dismiss="modal">&times;</button>
            </div>

            <!-- Modal body -->
            <div class="modal-body text-center" *ngIf="oldSection">

                <div class="row pl-0">
                    <div class="col-sm-4">
                        <label class="float-right">Test Instance : </label>
                    </div>
                    <div class="col-sm-5">
                        <div id="mul_close">
                            <angular2-multiselect [data]="dropdownListInstance" [(ngModel)]="selectedItemsInstance" [settings]="dropdownSettingsInstance" (onSelect)="pushSections($event)" (onDeSelect)="removeSections();selectedItemsInstance = []" (onDeSelectAll)="removeSections();selectedItemsInstance = []"></angular2-multiselect>
                        </div>
                    </div>
                    <div class="col-sm-2">
                    </div>
                </div>
                <div class="row pl-0 mt-4">
                    <div class="col-sm-2 offset-sm-2">
                        <label class="float-right">Section : </label>
                    </div>
                    <div class="col-sm-5">
                        <div [ngClass]="{'cursor_not':!dropdownList.length}" id="sec_mul">
                            <angular2-multiselect [data]="dropdownList" [(ngModel)]="selectedItems" [settings]="dropdownSettings" (onSelect)="addSec()" (onDeSelect)="removeSec()" (onDeSelectAll)="removeSec()"></angular2-multiselect>
                        </div>
                    </div>
                    <div class="col-sm-2">
                        <span title="Add New Section" class="add_new_sec" *ngIf="selectedItemsInstance.length && selectedItemsInstance[0].isGlobal == '0'" (click)="toggleOldNewSections();removeSections();selectedItemsInstance=[]">
                            <i class="material-icons">
                                add_circle
                            </i>
                        </span>

                    </div>
                </div>


                <div class="mt-4">
                    <button class="btn btn-primary" (click)="clickUpload()">
                        <i class="material-icons">
                            vertical_align_top
                        </i>
                        Choose File
                    </button>
                    <small *ngIf="filesToUpload.length" class="pl-5 blueColor">{{filesToUpload[0].name}}</small>
                    <small *ngIf="filesToUpload.length" class="pl-3 redCol">{{getSize(filesToUpload[0].size)}}</small>
                    <input id="upload_file_btn" [hidden]="true" type="file" (change)="uploadFile($event)">
                </div>
                <div class="mt-5 mb-5">
                    <button class="btn btn-success" (click)="uploadBulkQues()">
                        Upload
                    </button>
                </div>
                <div class="mt-4 mb-4">
                    <button class="btn btn-link float-left">
                        <a [href]="templateLink" download> Download Template for Questions Bulk upload </a>
                    </button>
                </div>
            </div>
            <div class="modal-body animated fadeIn" *ngIf="!oldSection">
                <div class="row">
                    <div class="col-sm-2">
                        <div class="back_to_sec">
                            <button class="btn btn-info" (click)="toggleOldNewSections()">
                                <i class="material-icons">
                                    arrow_back
                                </i>
                                <span>Back</span>
                            </button>

                        </div>
                    </div>
                    <div class="col-sm-10">
                        <div class="row p-3">
                            <div class="col-sm-4">
                                <label>Test Instance : </label>
                            </div>
                            <div class="col-sm-7">
                                <angular2-multiselect [data]="dropdownListInstance" [(ngModel)]="selectedItemsInstance" [settings]="dropdownSettingsInstance" (onSelect)="onInstanceSelect($event)" (onDeSelectAll)="clearCateg()" (onDeselect)="clearCateg()"></angular2-multiselect>
                            </div>
                        </div>
                        <div class="row p-3">
                            <div class="col-sm-4">
                                <label>Select Category : </label>
                            </div>
                            <div class="col-sm-7">
                                <div [ngClass]="{'cursor_not':!dropdownListCateg.length}">
                                    <angular2-multiselect [data]="dropdownListCateg" [(ngModel)]="selectedCateg" [settings]="dropdownCateg" (onSelect)="onCategSelect($event)" (onDeSelectAll)="heirarchy=null"></angular2-multiselect>
                                </div>

                            </div>
                        </div>
                        <div class="row col-sm-12 pl-5 pb-3">
                            <label for="exampleFormControlInput1">
                                <b>{{this.heirarchy}}</b>
                            </label>
                        </div>
                        <div class="row p-3">
                            <div class="col-sm-4">
                                <label>Section Name </label>
                            </div>
                            <div class="col-sm-7">
                                <input type="text" class="form-control" name="seactionName" [(ngModel)]="secCatName" placeholder="section name">
                            </div>
                        </div>
                        <div class="row p-5">
                            <div class="col-sm-12 text-center">
                                <button class="btn btn-primary" (click)="createSection()" [disabled]="!secCatName || !selectedCateg.length">Create Section</button>
                            </div>

                        </div>
                        <div class="col-sm-12">
                            <div class="alert alert-success" *ngIf="this.seactionSuccessMessage">
                                {{this.sectionStatusMessage}}
                            </div>
                            <div class="alert alert-danger" *ngIf="this.seactionFailMessage">
                                {{this.sectionStatusMessage}}
                            </div>
                        </div>
                    </div>
                </div>


            </div>


        </div>
    </div>
</div>

<!-- add question modal -->
<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">

            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-8 text-center">
                        <h4 class="blueColor">Add Questions</h4>
                    </div>
                    <div class="col-sm-4">
                        <button type="button" class="close" data-dismiss="modal">
                            <span class="boxShadow">
                                <i class="material-icons">
                                    clear
                                </i>
                            </span>

                        </button>
                    </div>
                    <div class="col-sm-12">
                        <hr>
                    </div>
                </div>
                <!-- <div class="p-4 text-center">
                    <h4 class="blueColor">Add Questions</h4>
                    <hr>
                </div> -->

                <!-- Created Question -->
                <div class="createdQuestion.length">
                    <div *ngFor="let ques of createdQuestion">
                        <div class="pl-4 pr-4">
                            <h4 class="blueColor">Q. {{ques.qustionText}}</h4>
                            <div *ngIf="ques.questionTypeId == '1' || ques.questionTypeId == '2'">
                                <p *ngFor="let opt of ques['optionsList'];let i=index">
                                    <b>{{i+1}}. </b>
                                    <span class="pl-4">{{opt.optionText}}</span>
                                </p>
                            </div>
                        </div>
                        <div *ngIf="ques.questionTypeId == '3' || ques.questionTypeId == '4' || ques.questionTypeId == '5' || ques.questionTypeId == '6'">

                            <p>
                                {{ques.answer}}
                            </p>
                        </div>
                        <hr>
                    </div>
                </div>
                <!-- End Created QUestion -->

                <div class="row pl-5">
                    <div class="col-sm-3">
                        <label>Select Section : </label>
                    </div>
                    <div class="col-sm-6">
                        <angular2-multiselect [data]="dropdownListAll" (onSelect)="onItemSelect($event)" [(ngModel)]="selectedItemsAll" [settings]="dropdownSettings"></angular2-multiselect>
                    </div>
                </div>
                <!-- <ul class="nav nav-tabs" id="myTab" role="tablist">
                    <li class="nav-item col">
                        <a class="nav-link active" style="text-align: center;" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home"
                            aria-selected="true">Add Questions</a>
                    </li>
                    <li class="nav-item col">
                        <a class="nav-link" id="profile-tab" style="text-align: center;" data-toggle="tab" href="#profile" role="tab" aria-controls="profile"
                            aria-selected="false">Bulk Upload</a>
                    </li>

                </ul> -->

                <div class="tab-content" id="myTabContent">

                    <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">

                        <form #myForm="ngForm" (ngSubmit)="addQuestion(myForm)">


                            <div style="padding: 2rem 3rem;
    text-align: left;
    font-size: 14px;">
                                <div class="form-row">
                                    <div class="form-group col-md-6">
                                        <div class="form-row">

                                            <div class="col-md-10">
                                                <label for="firstName">Question Title
                                                    <sup class="errorTxt">*</sup>
                                                </label>
                                                <input type="hidden" name="sectionId" [(ngModel)]=this.sectionId>
                                                <input type="text" class="form-control" id="questionTitle" name="questionText" [(ngModel)]="questionTxt" placeholder="" required>
                                            </div>

                                            <div class="col-md-2" style="padding-top: 2rem;" *ngIf="questionType && questionType =='7'">
                                                <i class="material-icons" (click)="questionImg()" style="cursor: pointer;">
                                                    image
                                                </i>
                                                <input type="file" [hidden]="true" (change)="onSelectedQuestionImage($event)" id="imageId">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label for="lastName">Question type
                                            <sup class="errorTxt">*</sup>
                                        </label>

                                        <select class="form-control" id="questionType" name="questionTypeId" #questionTypeId=ngModel [(ngModel)]="questionTypeEdit" (change)="setType(questionTypeId.value)" required>
                                            <option value="" disabled> Select Type</option>
                                            <option value="{{questionType.questionTypeId}}" [selected]="questionType.questionTypeId == questionTypeEdit" *ngFor="let questionType of questionTypeArr">{{questionType.questionType}}</option>
                                        </select>
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label for="lastName">Complexity
                                            <sup class="errorTxt">*</sup>
                                        </label>
                                        <select class="form-control" id="complexity" name="complexityId" [(ngModel)]="questComplexity" required>
                                            <option value="" disabled>Select </option>
                                            <option value="{{complex.complexityId}}" *ngFor="let complex of complexityArr">{{complex.complexity}} </option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group col-md-6">
                                        <p>
                                            <a (click)="onAccordion()" style="float: right;margin-right: 4rem;" data-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">
                                                + Additional data
                                            </a>

                                        </p>
                                    </div>
                                </div>
                                <div class="collapse" id="collapseExample">
                                    <div style="">

                                        <h4>Text / Code</h4>

                                        <div>
                                            <textarea id="txtarea2" class="form-control " name="questionCode" ngModel style="" spellcheck="false" placeholder="Add Code.."></textarea>
                                        </div>
                                        <!-- <ul class="nav nav-tabs" id="myTab2" role="tablist">
                                            <li class="nav-item col">
                                                <a (click)="onAccordion()" class="nav-link active" style="text-align: center;" id="text-tab" data-toggle="tab" href="#text"
                                                    role="tab" aria-controls="text" aria-selected="true">Text</a>
                                            </li>
                                            <li class="nav-item col">
                                                <a (click)="onCode()" class="nav-link" id="code-tab" style="text-align: center;" data-toggle="tab" href="#code" role="tab"
                                                    aria-controls="code" aria-selected="false">Code</a>
                                            </li>

                                        </ul> -->
                                        <!-- <div class="tab-content">
                                            <div class="tab-pane active" id="text" role="tabpanel" aria-labelledby="text-tab" style="padding:1rem">

                                                <textarea id="txtarea" class="form-control " style="border:none" spellcheck="false" placeholder="Add description.."></textarea>



                                            </div>
                                            <div class="tab-pane fade" id="code" role="tabpanel" aria-labelledby="code-tab" style="padding:1rem">
                                                <textarea id="txtarea2" class="form-control " name="questionCode" ngModel style="border:none" spellcheck="false" placeholder="Add Code.."></textarea>

                                            </div>
                                        </div> -->

                                    </div>
                                </div>

                                <div *ngIf="questionType == 1 || questionType == 2">
                                    <h5>Options</h5>
                                    <hr>
                                    <mat-radio-group class="example-radio-group" [(ngModel)]="mcaAns" name="radio_btn">
                                        <div *ngFor="let opt of optionList;let i=index">
                                            <div class="form-row" (mouseover)="showDelete(i)" (mouseleave)="hideDelete(i)">
                                                <div *ngIf="questionType == '1'" class="col-sm-1">

                                                    <mat-radio-button class="example-radio-button" (click)="setMcqAns(i)" [value]="i" class="correct_radio">

                                                    </mat-radio-button>
                                                </div>
                                                <div *ngIf="questionType == '2'" class="check_green">
                                                    <mat-checkbox class="example-margin" [checked]="checkMaqAnsers(i)" (click)="checkboxAns(i)"></mat-checkbox>
                                                </div>
                                                <div class="form-group col-md-4" *ngIf="questionType == '1' || questionType == '2'">
                                                    <!-- <label for="email">Option</label> -->
                                                    <!-- <input type="hidden" class="form-control" name="tempId" ngModel="{{this.tempOptionImageId}}"> -->
                                                    <input type="text" class="form-control" [(ngModel)]="optionObj[i].optionText" [ngModelOptions]="{standalone:true}" id="option_field_{{i}}">
                                                    <span id="close_{{i}}" class="close_icon" (click)="deleteOption(i)" [hidden]="optionList.length == 1">
                                                        <i class="material-icons">
                                                            close
                                                        </i>
                                                    </span>

                                                </div>

                                                <div class=" col-md-2 " style="padding-top: 2.25rem; " *ngIf="questionType == '7'">

                                                    <i class="material-icons" (click)="optionImg(i)" style="cursor:pointer;">
                                                        image
                                                    </i>
                                                    <input type="file" [hidden]="true" (change)="onSelectedOptionImage($event,i)" id="optionImageId{{i}}">

                                                </div>


                                            </div>
                                            <button class="btn btn-link " (click)="incOptionList()" style="margin-left: 18%;" *ngIf="optionList.length == i+1">
                                                + Add another option
                                            </button>
                                        </div>
                                    </mat-radio-group>
                                </div>



                                <!-- <div class="form-row ">
    <div class="form-group col-md-4 ">
    <label for="email ">Option</label>
    <input type="text " class="form-control " id="option " name="optionText " [(ngModel)]="this.optionObj " placeholder=" ">
    </div>
   
    <div class="col-md-2 " style="padding-top: 2.25rem; "> <i class="material-icons " (click)="optionImg() " style="cursor: pointer; ">
    image
    </i>
    <input type="file " [hidden]="true " (change)="onSelectedOptionImage($event) " id="optionImageId ">
    </div>
   
    </div> -->
                                <!-- <div class="form-row ">
    <div class="form-group col-md-4 ">
    <label for="email ">Option</label>
    <input type="text " class="form-control " id="option " placeholder=" ">
    <a href="JavaScript:Void(0); " style="float: right ">
    + Add another option
    </a>
    </div>
    <div class="col-md-2 " style="padding-top: 2.25rem; "> <i class="material-icons " (click)="optionImg1() " style="cursor: pointer; ">
    image
    </i>
    <input type="file " [hidden]="true " (change)="onSelectedOptionImage($event) " id="optionImageId1 ">
    </div>
    </div> -->
                                <div class="form-row">
                                    <div class="form-group col-md-4 ">
                                        <div *ngIf="questionType == 3 || questionType == 4 || questionType == 5 || questionType == 6">
                                            <label for="te ">Answer</label>
                                        </div>
                                        <div *ngIf="questionType == 3 || questionType == 4 || questionType == 5 || questionType == 6">
                                            <textarea rows="6" cols="80" name="answer" ngModel></textarea>
                                        </div>
                                        <!-- <div *ngIf="questionType == 1 ||  questionType == 2">
                                            <input type="text " class="form-control " name="answer" ngModel placeholder=" ">
                                        </div> -->
                                    </div>
                                </div>
                                <div class="col-md-12 pt-5 pl-0">
                                    <div style="float:left;margin-left: -2rem ">
                                        <!-- <label>Mandatory</label> -->
                                        <!-- <label class="container ">

                                            <input id="check" type="checkbox" name="isMandate" ngModel class="pointer mr-2">Mandatory
                                            <span class="checkmark " style="top: -25px; right: -35px; "></span>
                                        </label> -->

                                    </div>
                                    <div>
                                        <section class="example-section">
                                            <mat-slide-toggle class="example-margin" [color]="color" name="globaleShare" ngModel>
                                                Contribute to Global Question Catalouge
                                            </mat-slide-toggle>
                                        </section>
                                    </div>
                                    <div style="float: right;">

                                        <!-- <button type="button " class="btn btn-primary " style="background: #fff;color: #3D70B2;margin-right:2rem; border: 1px solid #3D70B2; height: 30px; line-height: 17px; border-radius: 0px; font-weight:
    600; font-size: 15px; " routerLink="sections ">+ Add Another Question</button>
                                        <button type="button " class="btn btn-primary " style="background: #fff;color: #3D70B2;margin-right:2rem; border: 1px solid #3D70B2; height: 30px; line-height: 17px; border-radius: 0px; font-weight:
    600; font-size: 15px; " routerLink="sections ">Create New Section</button> -->

                                        <button type="submit " class="btn btn-primary add_ques_btn" [ngClass]="{'cursor_not':!myForm.valid}" [disabled]="!myForm.valid || !selectedItemsAll.length">
                                            Add Question</button>
                                    </div>

                                </div>
                            </div>
                        </form>
                        <!-- <div class="alert alert-success" style="text-align:center" *ngIf="questionSuccesMessage">
                            <span style="text-align:center">{{this.statusMessage}}</span>
                        </div>
                        <div class="alert alert-danger" style="text-align:center" *ngIf="questionFailMessage">
                            <span>{{this.statusMessage}}</span>
                        </div>



                        <div class="alert alert-success" style="text-align:center" *ngIf="optionImageSuccess">
                            <span style="text-align:center">{{this.optionStatusMessage}}</span>
                        </div>
                        <div class="alert alert-danger" style="text-align:center" *ngIf="optionImageFail">
                            <span>{{this.optionStatusMessage}}</span>
                        </div> -->

                    </div>
                    <div class="tab-pane fade " id="profile " role="tabpanel " aria-labelledby="profile-tab ">...</div>

                </div>
            </div>

        </div>
    </div>
</div>
<!--  end modal -->

<!-- Modal -->
<div id="globQuesModal" class="modal fade" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">

                <div class="row col-sm-12">
                    <h4 class="modal-title" *ngIf="oldSection">Add Section</h4>
                    <h4 class="modal-title" *ngIf="!oldSection">Create New Section</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
            </div>
            <div class="modal-body animated fadeIn" *ngIf="oldSection">
                <div class="row pl-0">
                    <div class="col-sm-4">
                        <label class="float-right">Test Instance : </label>
                    </div>
                    <div class="col-sm-5">
                        <div id="mul_close">
                            <angular2-multiselect [data]="dropdownListInstance" [(ngModel)]="selectedItemsInstance" [settings]="dropdownSettingsInstance" (onSelect)="pushSections($event)" (onDeSelect)="removeSections()" (onDeSelectAll)="removeSections()"></angular2-multiselect>
                        </div>
                    </div>
                    <div class="col-sm-2">
                        <!-- <span title="Add New Section" class="add_new_sec" (click)="toggleOldNewSections()">
                                <i class="material-icons">
                                    add_circle
                                </i>
                            </span> -->
                    </div>
                </div>
                <div class="row pl-0 mt-4">
                    <div class="col-sm-2 offset-sm-2">
                        <label class="float-right">Section : </label>
                    </div>
                    <div class="col-sm-5">
                        <div [ngClass]="{'cursor_not':!dropdownList.length}" id="sec_mul">
                            <angular2-multiselect [data]="dropdownList" [(ngModel)]="selectedItems" [settings]="dropdownSettings" (onSelect)="addSec()" (onDeSelect)="removeSec()" (onDeSelectAll)="removeSec()"></angular2-multiselect>
                        </div>
                    </div>
                    <div class="col-sm-2">
                        <span title="Add New Section" class="add_new_sec" (click)="toggleOldNewSections()" *ngIf="selectedItemsInstance.length && selectedItemsInstance[0].isGlobal == '0'">
                            <i class="material-icons">
                                add_circle
                            </i>
                        </span>
                    </div>
                </div>
                <div class="row p-5">
                    <div class="col-sm-12 text-center">
                        <button class="btn btn-primary" (click)="importQuesAns()" [disabled]="!selectedItems.length">Import</button>
                    </div>

                </div>
            </div>
            <div class="modal-body animated fadeIn" *ngIf="!oldSection">
                <div class="row">
                    <div class="col-sm-2">
                        <div class="back_to_sec">
                            <button class="btn btn-info" (click)="toggleOldNewSections()">
                                <i class="material-icons">
                                    arrow_back
                                </i>
                                <span>Back</span>
                            </button>

                        </div>
                    </div>
                    <div class="col-sm-10">
                        <div class="row p-3">
                            <div class="col-sm-4">
                                <label>Test Instance : </label>
                            </div>
                            <div class="col-sm-7">
                                <angular2-multiselect [data]="dropdownListInstance" [(ngModel)]="selectedItemsInstance" [settings]="dropdownSettingsInstance" (onSelect)="onInstanceSelect($event)" (onDeSelectAll)="clearCateg()" (onDeselect)="clearCateg()"></angular2-multiselect>
                            </div>
                        </div>
                        <div class="row p-3">
                            <div class="col-sm-4">
                                <label>Select Category : </label>
                            </div>
                            <div class="col-sm-7">
                                <div [ngClass]="{'cursor_not':!dropdownListCateg.length}">
                                    <angular2-multiselect [data]="dropdownListCateg" [(ngModel)]="selectedCateg" [settings]="dropdownCateg" (onSelect)="onCategSelect($event)" (onDeSelectAll)="heirarchy=null"></angular2-multiselect>
                                </div>

                            </div>
                        </div>
                        <div class="row col-sm-12 pl-5 pb-3">
                            <label for="exampleFormControlInput1">
                                <b>{{this.heirarchy}}</b>
                            </label>
                        </div>
                        <div class="row p-3">
                            <div class="col-sm-4">
                                <label>Section Name </label>
                            </div>
                            <div class="col-sm-7">
                                <input type="text" class="form-control" name="seactionName" [(ngModel)]="secCatName" placeholder="section name">
                            </div>
                        </div>
                        <div class="row p-5">
                            <div class="col-sm-12 text-center">
                                <button class="btn btn-primary" (click)="createSection()" [disabled]="!secCatName || !selectedCateg.length">Create Section</button>
                            </div>

                        </div>
                        <div class="col-sm-12">
                            <div class="alert alert-success" *ngIf="this.seactionSuccessMessage">
                                {{this.sectionStatusMessage}}
                            </div>
                            <div class="alert alert-danger" *ngIf="this.seactionFailMessage">
                                {{this.sectionStatusMessage}}
                            </div>
                        </div>
                    </div>
                </div>


            </div>
        </div>

    </div>
</div>

<!-- Modal -->
<div id="addSectionModal" class="modal fade" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <div class="row col-sm-12">
                    <h4 class="modal-title">Create New Section</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>

                </div>

            </div>
            <div class="modal-body">
                <div class="row p-3">
                    <div class="col-sm-4">
                        <label>Select Category : </label>
                    </div>
                    <div class="col-sm-7">
                        <angular2-multiselect [data]="dropdownListCateg" [(ngModel)]="selectedCateg" [settings]="dropdownCateg" (onSelect)="onCategSelect($event)"></angular2-multiselect>
                    </div>
                </div>
                <div class="row col-sm-12 pl-5 pb-3">
                    <label for="exampleFormControlInput1">
                        <b>{{this.heirarchy}}</b>
                    </label>
                </div>
                <div class="row p-3">
                    <div class="col-sm-4">
                        <label>Section Name </label>
                    </div>
                    <div class="col-sm-7">
                        <input type="text" class="form-control" name="seactionName" [(ngModel)]="secCatName" placeholder="section name">
                    </div>
                </div>
                <div class="row p-5">
                    <div class="col-sm-12 text-center">
                        <button class="btn btn-primary" (click)="createSection()" [disabled]="!secCatName || !selectedCateg.length">Create Section</button>
                    </div>

                </div>
                <div class="col-sm-12">
                    <div class="alert alert-success" *ngIf="this.seactionSuccessMessage">
                        {{this.sectionStatusMessage}}
                    </div>
                    <div class="alert alert-danger" *ngIf="this.seactionFailMessage">
                        {{this.sectionStatusMessage}}
                    </div>
                </div>
            </div>

        </div>

    </div>
</div>

<!-- Modal -->
<button type="button" class="btn btn-info btn-lg" data-toggle="modal" id="uploaded_ques" [hidden]="true" data-target="#UploadedQuesModal">Open Modal</button>
<div id="UploadedQuesModal" class="modal fade" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Bulk Upload Status</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>

            <div class="modal-body pt-0 pb-0">

                <div class="row pt-4 pb-4">
                    <div class="col-sm-4">
                        <label><b>Total no of questions :</b></label>
                        <span class="pl-3 quesCountSize tot_count">{{totalQuestionsCount}}</span>
                    </div>
                    <div class="col-sm-4">
                        <label><b>No .of success questions :</b></label>
                        <span class="pl-3 quesCountSize succ_count">{{questionsSuccessCount}}</span>
                    </div>
                    <div class="col-sm-4">
                        <label><b>No .of already exist questions :</b></label>
                        <span class="pl-3 quesCountSize exist_count">{{questionsExistCount}}</span>
                    </div>
                </div>

                <div class="row">
                    <table class="table text-center" *ngIf="uploadedQues && !uploadedQues['questionResponseList'].length">
                        <tr class="text-center errorTxt">
                            <th colspan="3">No Questions Uploaded</th>
                        </tr>
                    </table>
                    <table class="table text-center" *ngIf="uploadedQues && uploadedQues['questionResponseList'].length">
                        <thead>
                            <tr>
                                <th>Question</th>
                                <!-- <th>Status</th> -->
                                <th>Message</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let ques of uploadedQues['questionResponseList']">
                                <td>{{ques.questionName}}</td>
                                <!-- <td>
                                            <p *ngIf="ques.statusCode == 0">Failed</p>
                                            <p *ngIf="ques.statusCode == 1">Uploaded</p>
                                            <p *ngIf="ques.statusCode == 2">Already Exists !</p>
                                        </td> -->
                                <td [ngClass]="{'red_col': ques.statusCode == 0, 'green_col':ques.statusCode == 1, 'yellow_col':ques.statusCode == 2}">{{ques.statusMessage}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>

    </div>
</div>

<!-- The Modal -->
<div class="modal" id="quesViewModal">
    <div class="modal-dialog">
        <div class="modal-content p-4 pb-5" *ngIf="hoverGlobQues">

            <!-- Modal Header -->
            <div class="modal-header">
                <!-- <h4 class="modal-title">Modal Heading</h4> -->
                <span class="ques_type_colr">Questions Type:</span> &nbsp; &nbsp;
                <span class="">{{hoverGlobQues.questionType}}</span>
                <span class="ques_type_colr pl-5">Complexity Mode:</span> &nbsp; &nbsp;
                <span class="">{{hoverGlobQues.questionComplexityType}}</span>
                <button type="button" class="close boxShadow" data-dismiss="modal">&times;</button>
            </div>

            <!-- Modal body -->
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-12">
                        <h5 class="mod_ques_clr">1. &nbsp; {{hoverGlobQues.qustionText}}</h5>
                    </div>

                    <div class="pl-3 pt-3 col-sm-12">
                        <pre class="ques_type_colr pl-4" *ngIf="hoverGlobQues.questionCode && hoverGlobQues.questionCode != 'null'">{{hoverGlobQues.questionCode}}</pre>
                    </div>

                    <div *ngIf="hoverGlobQues.questionTypeId =='1'" class="pl-3 pt-3">
                        <mat-radio-group class="example-radio-group" [(ngModel)]="mcaAns" name="radio_btn">
                            <div *ngFor="let opt of hoverGlobQues.optionsList;let i=index">

                                <mat-radio-button class="example-radio-button" [value]="i" class="correct_radio" [disabled]="true">
                                    <span class="white_spac_rad">{{opt.optionText}}</span>
                                </mat-radio-button>
                            </div>
                        </mat-radio-group>
                    </div>
                    <div *ngIf="hoverGlobQues.questionTypeId =='2'" class="pl-3 pt-3">
                        <mat-checkbox [color]="color" class="example-margin view_ques_chkbox" [checked]="this.checkBoxAnswers.includes(i)" *ngFor="let opt of hoverGlobQues.optionsList;let i=index">
                            <span class="white_spac_rad">{{opt.optionText}}</span>
                        </mat-checkbox>

                    </div>



                    <div *ngIf="hoverGlobQues.questionTypeId =='3' || hoverGlobQues.questionTypeId =='4' || hoverGlobQues.questionTypeId =='5' || hoverGlobQues.questionTypeId =='6'" class="pl-3 pt-3">

                        <p class="ques_type_colr">
                            <span style="color:#000000"> A.</span>
                            <span class="pl-4"> {{hoverGlobQues.answer}}</span>
                        </p>
                    </div>

                </div>
            </div>

            <!-- Modal footer -->
            <!-- <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
            </div> -->

        </div>
    </div>
</div>